const ui={
  _tag:"div",
  _after:function(){
    k8s._getInitData()
  },
  _attr:{
    class:"bz-v-panel",
  },
  _items:[
    {
      _tag:"div",
      _attr:{
        style:"display:flex;border-bottom: var(--bz-border);padding: 5px;"
      },
      _items:[
        {
          _tag:"div",
          _attr:{
            class:"input-group",
            style:"width:250px;"
          },
          _items:[
            {
              _tag:"label",
              _attr:{
                class:"input-group-addon"
              },
              _text:"_k8sMessage._common._namespace"
            },
            {
              _tag:"select",
              _attr:{
                class:"form-control"
              },
              _update:function(){
                k8s._saveSetting()
                k8s._getInitData()
              },
              _items:[
                {
                  _tag:"option",
                  _attr:{
                    value:"_data._item"
                  },
                  _text:"_data._item",
                  _dataRepeat:function(){
                    let d=k8s._data._namespaceList||[],
                        f=k8s._data._config.NSFilter
                    if(f){
                      f=new RegExp(f,"i")
                      d=d.filter(x=>f.test(x))
                    }
                    return d
                  }
                }
              ],
              _dataModel:"k8s._data._config.defaultNS"
            }
          ]
        },
        {
          _tag:"div",
          _attr:{
            class:"input-group",
            style:"width:200px;margin-right:15px;margin-left: -1px;"
          },
          _items:[
            {
              _tag:"label",
              _attr:{
                class:"input-group-addon",
                style:"min-width:unset"
              },
              _text:"_k8sMessage._method._filter"
            },
            {
              _tag:"input",
              _update:function(){
                k8s._saveSetting()
              },
              _attr:{
                class:"form-control"
              },
              _dataModel:"k8s._data._config.NSFilter"
            }
          ]
        },
        {
          _if:"k8s._data._loading",
          _tag:"div",
          _attr:{
            class:"input-group-btn",
            style:"margin-top:7px;"
          },
          _items:[
            {
              _tag:"button",
              _attr:{
                class:"btn btn-icon bz-loading bz-small-btn bz-none-border"
              }
            }
          ]
        }
      ]
    },
    {
      _tag:"div",
      _attr:{
        class:"bz-tab-bar"
      },
      _items:[
        {
          _tag:"div",
          _attr:{
            class:"'bz-tab '+(k8s._uiSwitch._curMainTab==_data._item&&'active')"
          },
          _jqext:{
            click:function(){
              k8s._uiSwitch._curMainTab=this._data._item
            }
          },
          _text:"_k8sMessage._main._tabs[_data._item]",
          _dataRepeat:["_pods","_services","_deployments"]
        },
        {
          _tag:"div",
          _attr:{
            style:"flex:1"
          }
        },
        {
          _tag:"div",
          _attr:{
            style:"margin-right:15px;width:33%;min-width:100px;"
          },
          _items:[
            {
              _tag:"div",
              _attr:{
                class:"input-group"
              },
              _items:[
                {
                  _tag:"label",
                  _attr:{
                    class:"input-group-addon"
                  },
                  _text:"_k8sMessage._method._filter"
                },
                {
                  _tag:"input",
                  _update:function(){
                    setTimeout(()=>{
                      k8s._saveSetting()
                    },100)
                  },
                  _attr:{
                    class:"form-control"
                  },
                  _dataModel:"k8s._data._config.filter"
                }
              ]
            }        
          ]
        }
      ]
    },
    {
      _tag:"div",
      _attr:{
        class:"bz-tab-content",
        style:"display:flex;"
      },
      _items:[
        _listViewDef,
        _logViewDef,
        _detailsViewDef,
        _servicesViewDef
      ]
    }
  ]
}
setTimeout(()=>{
  _CtrlDriver._execute(k8s,0,ui,document.body)
  $(document.body).click(function(){
    k8s._uiSwitch._showMenu=0
  })
})
